<%- include("../partials/header") %>
<main class="content">
  <div class="container-fluid p-0">

    <h1 class="h3 mb-3"><strong>Analytics</strong> Dashboard</h1>

    <div class="row">
      <div class="col-xl-12 col-xxl-12 d-flex">
        <div class="w-100">
          <div class="row">
            <div class="col-md-4">
              <!-- ✅ Each card in a separate column -->
              <div class="card">
                <div class="card-body">
                  <div class="row">
                    <div class="col mt-0">
                      <h5 class="card-title">Students</h5>
                    </div>
                    <div class="col-auto">
                      <div class="stat text-primary">
                        <i class="align-middle" data-feather="truck"></i>
                      </div>
                    </div>
                  </div>
                  <h1 class="mt-1 mb-3"><%= studentCount %></h1>
                </div>
              </div>
            </div>

            <div class="col-md-4">
              <!-- ✅ Keeps cards side by side from md and up -->
              <div class="card">
                <div class="card-body">
                  <div class="row">
                    <div class="col mt-0">
                      <h5 class="card-title">Aspirants</h5>
                    </div>
                    <div class="col-auto">
                      <div class="stat text-primary">
                        <i class="align-middle" data-feather="users"></i>
                      </div>
                    </div>
                  </div>
                  <h1 class="mt-1 mb-3"><%= aspirantCount %></h1>
                </div>
              </div>
            </div>

            <div class="col-md-4">
              <!-- ✅ Third card in a separate column -->
              <div class="card">
                <div class="card-body">
                  <div class="row">
                    <div class="col mt-0">
                      <h5 class="card-title">Teachers</h5>
                    </div>
                    <div class="col-auto">
                      <div class="stat text-primary">
                        <i class="align-middle" data-feather="dollar-sign"></i>
                      </div>
                    </div>
                  </div>
                  <h1 class="mt-1 mb-3"><%= teacherCount %></h1>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>


    </div>
  </div>

  <div class="row">


    <div class="row">
      <div class="col-12 col-md-6 col-lg-8 col-xxl-9 d-flex">
        <div class="card flex-fill">
          <div class="card-header">

            <h5 class="card-title mb-0">New Aspirants</h5>
          </div>
          <table class="table table-hover my-0">
            <thead>
              <tr>
                <th>Name</th>
                <th class="d-none d-xl-table-cell">Class</th>
                <th class="d-none d-xl-table-cell">Exam Number</th>
                <th>Gender</th>
                <th class="d-none d-md-table-cell">Status</th>
              </tr>
            </thead>
            <tbody>
              <% if(newAspirants.length > 0) { %>
              <% newAspirants.forEach(aspirant => { %>
              <tr>
                <td><a href="/dashboard/aspirant/<%= aspirant.id %>"><%= aspirant.firstName %> <%= aspirant.middleName %> <%= aspirant.lastName %></a></td>
                <td class="d-none d-xl-table-cell"><%= aspirant.class.name %></td>
                <td class="d-none d-xl-table-cell"><%= aspirant.examinationNumber %></td>
                <td><%= aspirant.gender %></td>
                <td><%- aspirant.isStudent ? '<span class="badge bg-success">Admitted</span>' : '<span class="badge bg-danger">Not Admitted</span>' %> </td>
              </tr>
              <% }) %>
              <% } else { %>
              <tr>
                <td colspan="5">
                  No Aspirants available
                </td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-12 col-md-6 col-lg-4 col-xxl-3 d-flex order-1 order-xxl-1">
        <div class="card flex-fill">
          <div class="card-header">

            <h5 class="card-title mb-0">Calendar</h5>
          </div>
          <div class="card-body d-flex">
            <div class="align-self-center w-100">
              <div class="chart">
                <div id="datetimepicker-dashboard"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</main>
<%- include("../partials/footer") %>